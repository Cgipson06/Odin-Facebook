<div class="wrap" >
  
  
  <div class="sidebar">
    <%= button_to "Make some new friends", users_index_path, method: :get%>
    <% if current_user.friend_requests.count != 0 %>
      <p>You have active friend requests from the following users</p>
      <% current_user.friend_requests.each do |a| %>
        <p><%= User.find(a.user_id).username %></p>
        <p> <%= button_to "Accept Friend Request", friendship_index_path, :params => {:invitee => a.user_id, :invitor => current_user.id} %></p>
      <% end %>
    <% end %>
    <p> Friends: </p>
    <ul>
      <% current_user.friends.each do |a| %>
        <li><%= a.username %></li>
      <% end %>
    </ul>
  </div>
  
  
  <div class="post_list">
    <h1><%= current_user.username %>'s Wall</h1>
    <%= link_to "Share your thoughts", new_post_path  %>
    <% @posts.each do |a| %>
        <div class="individual_post" >
          <p class="author"><%= User.find(a.author).username %><small> wrote:</small></p>
          <hr>
          <p class="title"><%= a.title %></p>
          <p class="content"><%= a.content %></p>
          <p class="post_time">Posted at <%= a.created_at %></p>
          <hr>
          <% a.likes.each do |l| %>
            <p><%=User.find(l.user_id).username %> likes this post.</p>
          <% end %>
          
          <p> <%= button_to "Like this post", likes_path, :params => {:user_id => current_user.id, :post_id => a.id} %>      
          <%= link_to "Comment", new_comment_path(:author => current_user.id, :post => a.id) %></p>         
          <% a.comments.each do |c| %>
            <div class="comments_in_post">
              <p><%= User.find(c.user_id).username %> commented:</p>
              <p><%= c.comment %></p>
            </div>
          <% end %>
        </div>
    <% end %>
  </div>
  
  
</div>